# Wathiq - تصميم واجهة التطبيق

## نظرة عامة

**Wathiq (واثق)** هو نظام متكامل لإدارة عملية انصراف الطلاب من المدارس بطريقة آمنة وفعالة. يتضمن المشروع تطبيقين للموبايل ولوحتي تحكم ويب، جميعها مصممة بما يتوافق مع **Apple Human Interface Guidelines (HIG)** لضمان تجربة مستخدم سلسة واحترافية.

---

## الهوية البصرية

### الألوان الأساسية

| اللون | الاستخدام | قيمة Hex |
|:------|:----------|:---------|
| **الأزرق الغني** | اللون الأساسي (Primary) - يرمز للثقة والاعتمادية | `#2563EB` |
| **البرتقالي** | لون التأكيد (Accent) - للإجراءات المهمة والتنبيهات | `#F97316` |
| **الأبيض** | الخلفية الرئيسية (Light Mode) | `#FFFFFF` |
| **الرمادي الداكن** | الخلفية الرئيسية (Dark Mode) | `#151718` |
| **الأخضر** | حالات النجاح | `#22C55E` |
| **الأحمر** | حالات الخطأ والتنبيهات الحرجة | `#EF4444` |

### الشعار

الشعار يتكون من:
- درع واقٍ يحتوي على حرف W
- علامة صح برتقالية ترمز للتحقق والأمان
- أيقونة موقع جغرافي برتقالية ترمز للتتبع
- النص "WATHIQ" بالإنجليزية و"واثق" بالعربية

---

## قائمة الشاشات

### تطبيق ولي الأمر (Parent App)

#### 1. شاشة الترحيب (Onboarding)
- **المحتوى:** شرح مبسط لكيفية عمل التطبيق (3 شاشات)
- **الوظيفة:** تعريف المستخدم الجديد بالميزات الأساسية

#### 2. شاشة تسجيل الدخول (Login)
- **المحتوى:** حقول إدخال رقم الهاتف/البريد الإلكتروني وكلمة المرور
- **الوظيفة:** المصادقة وتسجيل الدخول

#### 3. الشاشة الرئيسية (Home)
- **المحتوى:**
  - قائمة الأبناء مع صورهم وأسمائهم
  - حالة كل طالب (في المدرسة / في الطريق / تم الاستلام)
  - زر "طلب استلام" لكل طالب
- **الوظيفة:** عرض حالة الأبناء وبدء عملية الاستلام

#### 4. شاشة طلب الاستلام (Pickup Request)
- **المحتوى:**
  - اختيار الطالب
  - اختيار البوابة
  - خريطة توضح موقع ولي الأمر
  - زر "أنا جاهز للاستلام"
- **الوظيفة:** إرسال طلب استلام مع الموقع الجغرافي

#### 5. شاشة التتبع (Tracking)
- **المحتوى:**
  - حالة الطلب (قيد المراجعة / تم القبول / في الطريق)
  - خريطة توضح موقع الطالب (تقديري)
  - زر "استلمت ابني" (يظهر عند وصول الطالب)
  - زر "اتصال طارئ" للتواصل مع المشرفة
- **الوظيفة:** متابعة عملية التسليم والتأكيد النهائي

#### 6. شاشة الملف الشخصي (Profile)
- **المحتوى:**
  - معلومات ولي الأمر
  - قائمة الأشخاص المفوضين
  - زر "إضافة شخص مفوض"
  - إعدادات التطبيق
- **الوظيفة:** إدارة الحساب والأشخاص المفوضين

#### 7. شاشة السجل (History)
- **المحتوى:**
  - قائمة عمليات الاستلام السابقة
  - تفاصيل كل عملية (التاريخ، الوقت، المستلم، البوابة)
- **الوظيفة:** مراجعة سجل الاستلام

---

### تطبيق المشرفة (Supervisor App)

#### 1. شاشة تسجيل الدخول (Login)
- **المحتوى:** حقول إدخال اسم المستخدم وكلمة المرور
- **الوظيفة:** المصادقة وتسجيل الدخول

#### 2. الشاشة الرئيسية (Requests Dashboard)
- **المحتوى:**
  - قائمة طلبات الاستلام الواردة (مرتبة حسب الأقدمية)
  - كل طلب يعرض: صورة الطالب، اسمه، اسم ولي الأمر، البوابة، المسافة التقريبية
  - فلاتر (الكل / قيد المراجعة / في الطريق)
- **الوظيفة:** عرض وإدارة طلبات الاستلام

#### 3. شاشة تفاصيل الطلب (Request Details)
- **المحتوى:**
  - معلومات الطالب الكاملة
  - معلومات ولي الأمر/المفوض
  - خريطة توضح موقع ولي الأمر
  - زر "تم إرسال الطالب"
  - زر "اتصال طارئ"
- **الوظيفة:** مراجعة التفاصيل والموافقة على الطلب

#### 4. شاشة التنبيهات (Alerts)
- **المحتوى:**
  - قائمة الطلبات التي تجاوزت المدة المحددة دون تأكيد
  - تنبيهات صوتية ومرئية
- **الوظيفة:** متابعة الحالات التي تحتاج تدخل فوري

#### 5. شاشة السجل (History)
- **المحتوى:**
  - قائمة عمليات التسليم التي قامت بها المشرفة اليوم
  - إحصائيات سريعة (عدد العمليات، متوسط الوقت)
- **الوظيفة:** مراجعة الأداء اليومي

---

### لوحة تحكم المدرسة (School Dashboard - Web)

#### 1. الصفحة الرئيسية (Dashboard)
- **المحتوى:**
  - إحصائيات فورية (عدد الطلاب المسلمين، عدد الطلبات المعلقة، عدد أولياء الأمور المنتظرين)
  - مخططات بيانية (توزيع عمليات التسليم على مدار اليوم، أداء البوابات)
  - تنبيهات حرجة
- **الوظيفة:** نظرة شاملة على الوضع الحالي

#### 2. صفحة إدارة الطلاب (Students Management)
- **المحتوى:**
  - جدول بجميع الطلاب مع إمكانية البحث والفلترة
  - أزرار (إضافة، تعديل، حذف، استيراد من Excel)
- **الوظيفة:** إدارة قاعدة بيانات الطلاب

#### 3. صفحة إدارة المشرفين (Supervisors Management)
- **المحتوى:**
  - جدول بجميع المشرفين مع حالة كل منهم
  - تعيين البوابات لكل مشرف
  - أزرار (إضافة، تعديل، حذف)
- **الوظيفة:** إدارة فريق المشرفين

#### 4. صفحة إدارة أولياء الأمور (Parents Management)
- **المحتوى:**
  - جدول بجميع أولياء الأمور والأشخاص المفوضين
  - طلبات إضافة مفوضين جديدة (قيد المراجعة)
  - أزرار (موافقة، رفض، تعديل)
- **الوظيفة:** مراجعة والموافقة على الأشخاص المفوضين

#### 5. صفحة التقارير (Reports)
- **المحتوى:**
  - تقارير يومية/أسبوعية/شهرية
  - تقارير أداء المشرفين
  - تقارير التأخير
  - إمكانية تصدير التقارير (PDF, Excel)
- **الوظيفة:** تحليل الأداء واتخاذ القرارات

#### 6. صفحة الإعدادات (Settings)
- **المحتوى:**
  - إدارة البوابات
  - إعدادات الإشعارات
  - إعدادات الأمان
- **الوظيفة:** تخصيص النظام حسب احتياجات المدرسة

---

### لوحة تحكم السوبر أدمن (Super Admin Dashboard - Web)

#### 1. الصفحة الرئيسية (Dashboard)
- **المحتوى:**
  - إحصائيات شاملة (عدد المدارس، عدد الطلاب الكلي، عدد المستخدمين)
  - مخططات بيانية (نمو المدارس، الإيرادات الشهرية، معدل الاستخدام)
  - تنبيهات النظام
- **الوظيفة:** نظرة شاملة على النظام بأكمله

#### 2. صفحة إدارة المدارس (Schools Management)
- **المحتوى:**
  - جدول بجميع المدارس مع حالة الاشتراك
  - أزرار (إضافة مدرسة، تعديل، تفعيل/إلغاء تفعيل)
  - ملف تعريف لكل مدرسة (عدد الطلاب، عدد المشرفين، سجل الفواتير)
- **الوظيفة:** إدارة جميع المدارس المشتركة

#### 3. صفحة إدارة الاشتراكات (Subscriptions)
- **المحتوى:**
  - خطط الأسعار المتاحة
  - إنشاء وتعديل خطط جديدة
  - سجل المدفوعات
  - تنبيهات الدفع المتأخر
- **الوظيفة:** إدارة الفوترة والاشتراكات

#### 4. صفحة التقارير المالية (Financial Reports)
- **المحتوى:**
  - تقارير الإيرادات الشهرية/السنوية
  - تقارير المدفوعات المتأخرة
  - توقعات الإيرادات المستقبلية
- **الوظيفة:** متابعة الأداء المالي

#### 5. صفحة إعدادات النظام (System Settings)
- **المحتوى:**
  - إدارة المستخدمين (مديري المدارس، فريق الدعم)
  - التكاملات الخارجية (بوابات الدفع، خدمات الخرائط)
  - قوالب الإشعارات
  - سياسات الأمان
- **الوظيفة:** تخصيص وإدارة النظام بالكامل

---

## تدفقات المستخدم الرئيسية

### تدفق 1: طلب استلام طالب (ولي الأمر)

1. ولي الأمر يفتح التطبيق ويختار الطالب من الشاشة الرئيسية
2. يضغط على "طلب استلام"
3. يختار البوابة من القائمة
4. يؤكد موقعه الجغرافي على الخريطة
5. يضغط على "أنا جاهز للاستلام"
6. يتلقى إشعاراً بأن الطلب قيد المراجعة
7. عند موافقة المشرفة، يتلقى إشعاراً "ابنك في الطريق إليك"
8. عند وصول الطالب، يضغط على "استلمت ابني"
9. تنتهي العملية بنجاح

### تدفق 2: معالجة طلب استلام (المشرفة)

1. المشرفة تفتح التطبيق وترى قائمة الطلبات
2. تضغط على طلب معين لعرض التفاصيل
3. تتحقق من هوية ولي الأمر/المفوض وموقعه
4. تضغط على "تم إرسال الطالب"
5. يبدأ عداد الوقت (5 دقائق)
6. إذا لم يؤكد ولي الأمر الاستلام خلال 5 دقائق، يظهر تنبيه صوتي ومرئي
7. المشرفة تتصل بولي الأمر للتحقق من الوضع
8. عند تأكيد الاستلام، تنتهي العملية

### تدفق 3: إضافة مدرسة جديدة (السوبر أدمن)

1. السوبر أدمن يفتح لوحة التحكم
2. يذهب إلى صفحة "إدارة المدارس"
3. يضغط على "إضافة مدرسة جديدة"
4. يملأ النموذج (اسم المدرسة، العنوان، بيانات التواصل، معلومات مدير النظام)
5. يختار خطة الاشتراك
6. يضغط على "حفظ"
7. يتم إنشاء حساب المدرسة وإرسال بيانات الدخول لمدير النظام

---

## المبادئ التصميمية

### 1. البساطة والوضوح
- واجهات نظيفة وخالية من التعقيد
- استخدام أيقونات واضحة ومعبرة
- نصوص قصيرة ومباشرة

### 2. الاستجابة السريعة
- ردود فعل فورية على جميع الإجراءات (haptic feedback، تغيير الألوان)
- مؤشرات تحميل واضحة
- إشعارات فورية

### 3. الأمان أولاً
- تأكيدات إضافية للإجراءات الحرجة
- عرض واضح لحالة الأمان (رموز القفل، علامات التحقق)
- تنبيهات فورية للحالات غير الطبيعية

### 4. إمكانية الوصول
- دعم الوضع الليلي (Dark Mode)
- أحجام خطوط قابلة للتعديل
- تباين ألوان عالٍ للنصوص المهمة
- دعم قارئات الشاشة

### 5. الاتساق
- استخدام نفس الأنماط والألوان في جميع الشاشات
- تجربة مستخدم موحدة عبر التطبيقات ولوحات التحكم
- أزرار وعناصر تحكم في نفس المواقع المتوقعة

---

## التقنيات المستخدمة

### تطبيق الموبايل
- **React Native** مع **Expo SDK 54**
- **NativeWind** (Tailwind CSS for React Native)
- **TypeScript**
- **Expo Router** للتنقل
- **React Native Reanimated** للرسوم المتحركة
- **Expo Location** لتتبع الموقع الجغرافي
- **Expo Notifications** للإشعارات الفورية

### لوحات التحكم (Web)
- **React** مع **TypeScript**
- **Tailwind CSS** للتصميم
- **TanStack Query** لإدارة البيانات
- **Recharts** للمخططات البيانية

### الخلفية (Backend)
- **Node.js** مع **Express**
- **PostgreSQL** لقاعدة البيانات
- **Drizzle ORM**
- **WebSockets** للاتصال الفوري
- **JWT** للمصادقة

---

## الخطوات التالية

1. ✅ تصميم واجهة التطبيق (هذا الملف)
2. ⏳ بناء تطبيق ولي الأمر
3. ⏳ بناء تطبيق المشرفة
4. ⏳ بناء لوحة تحكم المدرسة
5. ⏳ بناء لوحة تحكم السوبر أدمن
6. ⏳ إنشاء صفحة ويب تفاعلية لعرض البيانات والإحصائيات
7. ⏳ الاختبار والتسليم النهائي
